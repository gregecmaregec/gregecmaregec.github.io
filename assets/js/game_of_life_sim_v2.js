async function animate(){const t=Date.now()-startTime,i=Math.min(1,t/2e3);if(updateGrid(leftGrid,blocksByWidth,blocksByHeight),updateGrid(rightGrid,blocksByWidth,blocksByHeight),drawGrid(leftCtx,leftGrid,blockSizeWidth,blockSizeHeight),drawGrid(rightCtx,rightGrid,blockSizeWidth,blockSizeHeight),i>=1)return drawGrid(leftCtx,leftGrid,blockSizeWidth,blockSizeHeight),void drawGrid(rightCtx,rightGrid,blockSizeWidth,blockSizeHeight);easeInOutQuad(i);await new Promise(t=>setTimeout(t,delayBetweenGenerations)),animationId=requestAnimationFrame(animate)}function easeInOutQuad(t){return t<.5?2*t*t:(4-2*t)*t-1}function createGrid(t,i){const e=new Array(i);for(let a=0;a<i;a++)e[a]=new Array(t).fill(0);return e}function initializeGrid(t,i,e){for(let a=0;a<e;a++)for(let e=0;e<i;e++)t[a][e]=Math.random()<.1?1:0}function updateGrid(t,i,e){const a=createGrid(i,e);for(let n=0;n<e;n++)for(let r=0;r<i;r++){const l=countNeighbors(t,r,n,i,e),o=1===t[n][r];a[n][r]=o&&(l<2||l>3)?0:o||3!==l?t[n][r]:1}for(let i=0;i<e;i++)t[i]=a[i].slice()}function countNeighbors(t,i,e,a,n){let r=0;for(let l=-1;l<=1;l++)for(let o=-1;o<=1;o++){if(0===l&&0===o)continue;const d=(i+l+a)%a;r+=t[(e+o+n)%n][d]}return r}function drawGrid(t,i,e,a){t.clearRect(0,0,t.canvas.width,t.canvas.height);for(let n=0;n<i.length;n++)for(let r=0;r<i[n].length;r++){const l=1===i[n][r];t.fillStyle=l?"rgba(139, 0, 0, 0.8)":"rgba(0, 0, 0, 0)",t.fillRect(r*e,n*a,e,a)}}const leftCanvas=document.createElement("canvas");leftCanvas.width=200,leftCanvas.height=500,leftCanvas.style.position="fixed",leftCanvas.style.left="0",leftCanvas.style.top="50%",leftCanvas.style.transform="translateY(-50%)",document.body.appendChild(leftCanvas);const rightCanvas=document.createElement("canvas");rightCanvas.width=200,rightCanvas.height=500,rightCanvas.style.position="fixed",rightCanvas.style.right="0",rightCanvas.style.top="50%",rightCanvas.style.transform="translateY(-50%)",document.body.appendChild(rightCanvas);const leftCtx=leftCanvas.getContext("2d"),rightCtx=rightCanvas.getContext("2d"),blocksByHeight=70,blocksByWidth=28,blockSizeWidth=leftCanvas.width/blocksByWidth,blockSizeHeight=leftCanvas.height/blocksByHeight;rightCanvas.width=leftCanvas.width,rightCanvas.height=leftCanvas.height;let animationId,leftGrid=createGrid(blocksByWidth,blocksByHeight),rightGrid=createGrid(blocksByWidth,blocksByHeight);initializeGrid(leftGrid,blocksByWidth,blocksByHeight),initializeGrid(rightGrid,blocksByWidth,blocksByHeight),requestAnimationFrame(animate);const startTime=Date.now();setTimeout(()=>{cancelAnimationFrame(animationId),updateGrid(leftGrid,blocksByWidth,blocksByHeight),updateGrid(rightGrid,blocksByWidth,blocksByHeight),drawGrid(leftCtx,leftGrid,blockSizeWidth,blockSizeHeight),drawGrid(rightCtx,rightGrid,blockSizeWidth,blockSizeHeight)},2e3);const delayBetweenGenerations=200;
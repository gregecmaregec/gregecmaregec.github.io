function animate(){updateGrid(leftGrid,blocksByWidth,blocksByHeight),updateGrid(rightGrid,blocksByWidth,blocksByHeight),drawGrid(leftCtx,leftGrid,blockSizeWidth,blockSizeHeight),drawGrid(rightCtx,rightGrid,blockSizeWidth,blockSizeHeight),setTimeout(()=>{animationId=requestAnimationFrame(animate)},delayBetweenGenerations)}function initializeGrid(t,i,e){for(let a=0;a<e;a++)for(let e=0;e<i;e++)t[a][e]=Math.random()<.3?1:0}function animate(){updateGrid(leftGrid,blocksByWidth,blocksByHeight),updateGrid(rightGrid,blocksByWidth,blocksByHeight),drawGrid(leftCtx,leftGrid,blockSizeWidth,blockSizeHeight),drawGrid(rightCtx,rightGrid,blockSizeWidth,blockSizeHeight),animationId=requestAnimationFrame(animate)}function updateGrid(t,i,e){const a=createGrid(i,e);for(let n=0;n<e;n++)for(let l=0;l<i;l++){const o=countNeighbors(t,l,n,i,e),r=1===t[n][l];a[n][l]=r&&(o<2||o>3)?0:r||3!==o?t[n][l]:1}for(let i=0;i<e;i++)t[i]=a[i].slice()}function countNeighbors(t,i,e,a,n){let l=0;for(let o=-1;o<=1;o++)for(let r=-1;r<=1;r++){if(0===o&&0===r)continue;const d=(i+o+a)%a;l+=t[(e+r+n)%n][d]}return l}function drawGrid(t,i,e,a){t.clearRect(0,0,t.canvas.width,t.canvas.height);for(let n=0;n<i.length;n++)for(let l=0;l<i[n].length;l++){const o=1===i[n][l];t.fillStyle=o?"rgba(139, 0, 0, 0.8)":"rgba(0, 0, 0, 0)",t.fillRect(l*e,n*a,e,a)}}const leftCanvas=document.createElement("canvas");leftCanvas.width=300,leftCanvas.height=500,leftCanvas.style.position="absolute",leftCanvas.style.left="0",document.body.appendChild(leftCanvas);const rightCanvas=document.createElement("canvas");rightCanvas.width=300,rightCanvas.height=500,rightCanvas.style.position="absolute",rightCanvas.style.right="0",document.body.appendChild(rightCanvas);const leftCtx=leftCanvas.getContext("2d"),rightCtx=rightCanvas.getContext("2d"),blocksByHeight=50,blocksByWidth=30,blockSizeWidth=leftCanvas.width/blocksByWidth,blockSizeHeight=leftCanvas.height/blocksByHeight;let animationId,leftGrid=createGrid(blocksByWidth,blocksByHeight),rightGrid=createGrid(blocksByWidth,blocksByHeight);initializeGrid(leftGrid,blocksByWidth,blocksByHeight),initializeGrid(rightGrid,blocksByWidth,blocksByHeight),requestAnimationFrame(animate);const delayBetweenGenerations=100;setTimeout(()=>{cancelAnimationFrame(animationId)},12e4);
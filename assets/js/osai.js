function adjustTextareaHeight(e){e.style.height="auto",e.style.height=e.scrollHeight+"px"}function modelChoice(e,t=!1){if(selectedModel=e,document.querySelectorAll("#modelSelectorContainer button").forEach(t=>{t.getAttribute("data-model")===e?t.style.borderBottom="2px solid rgba(139, 0, 0, 0.8)":(t.style.border="1px solid rgba(0, 0, 0, 0.3)",t.style.borderBottom="2px solid rgba(204, 204, 204, 0.3)",t.style.borderRight="1px solid rgba(68, 68, 68, 0.3)")}),t){const t=document.querySelector(`button[data-model="${e}"]`);t&&t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}}let selectedModel="llama3.1",messageHistory=[];document.addEventListener("DOMContentLoaded",function(){function e(){adjustTextareaHeight(l),r.style.display=l.value.trim()?"block":"none"}function t(e){if("Enter"===e.key)if(e.shiftKey){e.preventDefault();const t=l.selectionStart,n=l.selectionEnd;l.value=l.value.substring(0,t)+"\n"+l.value.substring(n),l.selectionStart=l.selectionEnd=t+1,adjustTextareaHeight(l)}else e.preventDefault(),n()}function n(){const e=l.value.trim();if(!e)return;o("You",e),messageHistory.push({role:"user",content:e});const t={model:selectedModel,messages:[...messageHistory],options:{temperature:.6,num_thread:8}};d.style.display="block",l.disabled=!0,r.disabled=!0,fetch("https://gmserver.xyz",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.text()).then(e=>{o(selectedModel.charAt(0).toUpperCase()+selectedModel.slice(1),e.trim()),messageHistory.push({role:"assistant",content:e.trim()})})["catch"](e=>{o("Error",e.message+'\n\n <a href="https://gregormihelac.com/osai-error/">experiencing issues?</a>',!0)})["finally"](()=>{d.style.display="none",l.disabled=!1,r.disabled=!1}),l.value="",l.style.height="68px",r.style.display="none"}function o(e,t,n=!1){const o=document.createElement("strong");if(o.textContent=e,s.appendChild(o),s.appendChild(document.createElement("br")),n){const[e,n]=t.split("\n\n");if(s.appendChild(document.createTextNode(e)),s.appendChild(document.createElement("br")),s.appendChild(document.createElement("br")),n&&n.includes("<a href")){const e=document.createElement("a");e.href="https://gregormihelac.com/osai-error/",e.textContent="experiencing issues?",s.appendChild(e)}}else t.split("\n").forEach((e,t,n)=>{s.appendChild(document.createTextNode(e)),t<n.length-1&&s.appendChild(document.createElement("br"))});s.appendChild(document.createElement("br")),s.appendChild(document.createElement("br")),s.scrollTop=s.scrollHeight}const l=document.getElementById("inputBox"),s=document.getElementById("outputBox"),d=document.getElementById("loader"),r=document.getElementById("sendButton");modelChoice("llama3.1",!0),l.addEventListener("input",e),l.addEventListener("keydown",t),r.addEventListener("click",n)});
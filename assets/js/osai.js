function adjustTextareaHeight(e){const t=parseInt(window.getComputedStyle(e).lineHeight),n=parseInt(window.getComputedStyle(e).paddingTop)+parseInt(window.getComputedStyle(e).paddingBottom),o=e.value.split("\n").length,l=o>1?o*t+n:50;e.style.height=l+"px"}function modelChoice(e){selectedModel=e,document.querySelectorAll("#modelSelectorContainer button").forEach(t=>{t.getAttribute("data-model")===e?t.style.borderBottom="2px solid rgba(139, 0, 0, 0.8)":(t.style.border="1px solid rgba(0, 0, 0, 0.3)",t.style.borderBottom="2px solid rgba(204, 204, 204, 0.3)",t.style.borderRight="1px solid rgba(68, 68, 68, 0.3)")})}let selectedModel="llama3.1",messageHistory=[];document.addEventListener("DOMContentLoaded",function(){function e(){const e=l.value.split("\n");e.length>1||1===e.length&&l.scrollHeight>l.clientHeight?adjustTextareaHeight(l):l.style.height="50px"}function t(e){if("Enter"===e.key)if(e.shiftKey){e.preventDefault();const t=l.selectionStart,n=l.selectionEnd;l.value=l.value.substring(0,t)+"\n"+l.value.substring(n),l.selectionStart=l.selectionEnd=t+1,adjustTextareaHeight(l)}else e.preventDefault(),n()}function n(){const e=l.value.trim();if(!e)return;o("You",e),messageHistory.push({role:"user",content:e});const t={model:selectedModel,messages:[...messageHistory],options:{temperature:.6,num_thread:8}};d.style.display="block",l.disabled=!0,fetch("https://gmserver.xyz",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.text()).then(e=>{o(selectedModel.charAt(0).toUpperCase()+selectedModel.slice(1),e.trim()),messageHistory.push({role:"assistant",content:e.trim()})})["catch"](e=>{o("Error",e.message+'\n\n <a href="https://gregormihelac.com/osai-error/">experiencing issues?</a>',!0)})["finally"](()=>{d.style.display="none",l.disabled=!1}),l.value="",l.style.height="50px"}function o(e,t,n=!1){const o=document.createElement("strong");if(o.textContent=e,s.appendChild(o),s.appendChild(document.createElement("br")),n){const[e,n]=t.split("\n\n");if(s.appendChild(document.createTextNode(e)),s.appendChild(document.createElement("br")),s.appendChild(document.createElement("br")),n&&n.includes("<a href")){const e=document.createElement("a");e.href="https://gregormihelac.com/osai-error/",e.textContent="experiencing issues?",s.appendChild(e)}}else t.split("\n").forEach((e,t,n)=>{s.appendChild(document.createTextNode(e)),t<n.length-1&&s.appendChild(document.createElement("br"))});s.appendChild(document.createElement("br")),s.appendChild(document.createElement("br")),s.scrollTop=s.scrollHeight}const l=document.getElementById("inputBox"),s=document.getElementById("outputBox"),d=document.getElementById("loader");l.addEventListener("input",e),l.addEventListener("keydown",t)});
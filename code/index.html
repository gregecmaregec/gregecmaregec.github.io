<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> code | gregor mihelac </title> <meta name="author" content="gregor mihelac"> <meta name="description" content="Personal website of Gregor Mihelac, born 2000 in Slovenia "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?025568753398d366afafa48f90757628"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://gregecmaregec.github.io/code/"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?0afe9f0ae161375728f7bcc5eb5b4ab4"></script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> gregor mihelac </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">showroom </a> </li> <li class="nav-item active"> <a class="nav-link" href="/code/">code <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/about/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/osai/">osai </a> </li> <li class="nav-item "> <a class="nav-link" href="/philosophy/">philosophy </a> </li> <li class="nav-item "> <a class="nav-link" href="/itfasubmission/">ITFA EL 2024 submission </a> </li> <li class="nav-item "> <a class="nav-link" href="/cb-application/">CB Trainee 2025 application </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">code</h1> <p class="post-description"></p> </header> <article> <p>All code shown explicitly on /code/ is under the <a href="https://github.com/gregecmaregec/gregecmaregec.github.io/blob/master/LICENSE" rel="external nofollow noopener" target="_blank">MIT License.</a> <br><br> Feel free to copy the below working code to your own project under the conditions of the MIT License.</p> <p><br> <br></p> <details> <summary>### the blossom circles and scroll effect in /philosophy/</summary> <pre><code class="language-javascript">
// create a canvas element
const canvas = document.createElement('canvas');
document.body.appendChild(canvas);

// get the 2D rendering context
const ctx = canvas.getContext('2d');

// create an array to store the cherry blossom leaves
const leaves = [];

// keeping canvas at 0.99 of the window size prevents overflow
canvas.width = window.innerWidth * 0.99;
canvas.height = window.innerHeight * 0.99;

// balls are called Leaf
class Leaf {
    constructor(x, y, size, speed) {
        this.x = x;
        this.y = y;
        this.size = size;
        this.speed = speed;
    }

    update() {
        this.y += this.speed * 0.2;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fillStyle = 'rgba(255, 192, 203, 0.3)';
        ctx.fill();
        ctx.closePath();

        if (this.y &gt; canvas.height + this.size) {
            this.y = -this.size;
        }
    }
}

function createLeaves() {
    const leafCount = 20;
    for (let i = 0; i &lt; leafCount; i++) {
        const x = Math.random() * window.innerWidth;
        // balls get generated at the top half first due to y
        const y = Math.random() * (window.innerHeight / 2);
        const size = Math.random() * 10 + 5;
        const speed = Math.random() * 0.5 + 0.5;
        leaves.push(new Leaf(x, y, size, speed));
    }
}

function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    for (const leaf of leaves) {
        leaf.update();
    }
    requestAnimationFrame(animate);
}

createLeaves();
animate();

let userHasScrolled = false;

// detect user-initiated scroll actions to disable auto scroll feature
window.addEventListener('wheel', () =&gt; userHasScrolled = true);
window.addEventListener('touchmove', () =&gt; userHasScrolled = true);

setTimeout(() =&gt; {
    if (!userHasScrolled) {
        const scrollDistance = canvas.height / 2;
        // 10 seconds for the auto-scrolling to complete
        const scrollDuration = 10000;
        let startTime = null;

        function scrollStep(timestamp) {
            if (userHasScrolled) return;

            if (!startTime) startTime = timestamp;
            const elapsedTime = timestamp - startTime;
            const progress = elapsedTime / scrollDuration;

            const scrollY = easeInOutQuad(progress) * scrollDistance;
            window.scrollTo(0, startY + scrollY);

            if (elapsedTime &lt; scrollDuration) {
                requestAnimationFrame(scrollStep);
            }
        }

        const startY = window.scrollY;
        requestAnimationFrame(scrollStep);
    }
// 4 seconds of inaction starts auto-scroll to complete
}, 4000);

// a technique for auto-scrolling to be smooth
function easeInOutQuad(progress) {
    if (progress &lt; 0.5) {
        return 2 * progress * progress;
    } else {
        return -1 + (4 - 2 * progress) * progress;
    }
}
</code></pre> </details> <p><br> <br></p> <hr> <p><br> <br></p> <details> <summary>### particle crystal-nature simulation in pure JS</summary> <pre><code class="language-javascript">
// here it will go really fast
const canvas = document.createElement('canvas');
document.body.appendChild(canvas);
    
const ctx = canvas.getContext('2d');

// set canvas size
canvas.width = Math.min(window.innerWidth * 0.98, 800);
canvas.height = 400;

// center canvas horizontally
canvas.style.display = 'block';
canvas.style.margin = '20px auto';

// particle system
class Particle {
    constructor(x, y) {
        this.x = x;
        this.y = y;
        this.size = Math.random() * 5 + 1;
// you need to search for local minima by deriing as to minimize speed with the speed approach below
        this.speedX = (Math.random() * 3 - 1.5) * 0.60;
        this.speedY = (Math.random() * 3 - 1.5) * 0.60;
        this.color = `hsl(${Math.random() * 360}, 100%, 50%)`;
    }

    update() {
        this.x += this.speedX;
        this.y += this.speedY;

        if (this.size &gt; 0.2) this.size -= 0.1;
    }

    draw() {
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
    }
}

let particles = [];
const mouse = { x: null, y: null, radius: 150 };

function createParticles() {
    for (let i = 0; i &lt; 4; i++) {
        particles.push(new Particle(
            Math.random() * canvas.width,
            Math.random() * canvas.height
        ));
    }
}

function handleParticles() {
    for (let i = 0; i &lt; particles.length; i++) {
        particles[i].update();
        particles[i].draw();

        for (let j = i; j &lt; particles.length; j++) {
            const dx = particles[i].x - particles[j].x;
            const dy = particles[i].y - particles[j].y;
            const distance = Math.sqrt(dx * dx + dy * dy);

            if (distance &lt; 100) {
                ctx.beginPath();
                ctx.strokeStyle = particles[i].color;
                ctx.lineWidth = 0.2;
                ctx.moveTo(particles[i].x, particles[i].y);
                ctx.lineTo(particles[j].x, particles[j].y);
                ctx.stroke();
            }
        }

        if (particles[i].size &lt;= 0.2) {
            particles.splice(i, 1);
            i--;
        }
    }
}


function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    handleParticles();
    createParticles();
    requestAnimationFrame(animate);
}

// below makes particles when you hover with mouse 
canvas.addEventListener('mousemove', (event) =&gt; {
    mouse.x = event.x - canvas.offsetLeft;
    mouse.y = event.y - canvas.offsetTop;

    for (let i = 0; i &lt; 6; i++) {
        particles.push(new Particle(mouse.x, mouse.y));
    }
});

animate();​​​​​
</code></pre> </details> <p><br> <br></p> <hr> <p><br> <br></p> <details> <summary>### bash script to load a guest directly to a program</summary> <pre><code class="language-bash">
#!/bin/bash

#let's assume your guest user is called 'serverguest'

if [ "$USER" = "serverguest" ]; then
     trap '' SIGINT
     trap '' SIGTERM
     trap '' SIGHUP
     trap '' SIGKILL
     trap '' SIGSTOP
     trap '' SIGQUIT
     trap '' SIGTSTP
     trap '' SIGCONT
     trap '' SIGPIPE
     trap '' SIGCHLD
     trap '' SIGUSR1
     trap '' SIGUSR2

     echo -e "
     welcome
     "
     yourprogram # this is the program that you want to execute
     # it will run as if typing yourprogram into the terminal as user serverguest

     exit #drops the connection after the program is quit
fi

# save the script under /etc/profile.d/ with the .sh extension
# to have it run on every log-in (inlcuding root)

# make serverguest have restricted bash by running
chsh -s /bin/rbash serverguest
# in the terminal as super user
</code></pre> </details> <p><br> <br></p> <hr> <p><br> <br></p> <details> <summary>### game of life simulation</summary> <pre><code class="language-javascript">
// create a canvas element
const canvas = document.createElement('canvas');
document.body.appendChild(canvas);

// get the 2D rendering context
const ctx = canvas.getContext('2d');

// dimensions of the game!
const numBlocksX = 90;
const numBlocksY = 90;

// calculate the maximum dimension of the display
const maxDimension = Math.min(window.innerWidth, window.innerHeight);

// set the canvas size to be macDimension pixels
const canvasSize = Math.min(maxDimension, 500);
canvas.width = canvasSize;
canvas.height = canvasSize;
// below sets the canvas to be centered on the page
canvas.style.marginLeft = `${(window.innerWidth - canvasSize) / 2}px`;

// calculate the size of each block in the grid based on the maximum dimension
const blockSize = canvasSize / Math.max(numBlocksX, numBlocksY);

// create a 2D array to store the grid state
let grid = createGrid();

// create the initial grid state
initializeGrid();

// run the game immediately upon site load
animate();

// stop the animation after n minutes
setTimeout(() =&gt; {
    cancelAnimationFrame(animationId);
}, 6 * 60 * 1000);

let animationId;

function createGrid() {
    const grid = new Array(numBlocksX);
    for (let x = 0; x &lt; numBlocksX; x++) {
        grid[x] = new Array(numBlocksY);
    }
    return grid;
}

function initializeGrid() {
    for (let x = 0; x &lt; numBlocksX; x++) {
        for (let y = 0; y &lt; numBlocksY; y++) {
            // randomly set each block to be alive or dead
            grid[x][y] = Math.random() &lt; 0.3 ? 1 : 0;
        }
    }
}

let timerId;

function animate() {
    updateGrid();
    drawGrid();
    timerId = setTimeout(animate, 100);
    
}

setTimeout(() =&gt; {
    clearTimeout(timerId);
}, 120000);

function updateGrid() {
    const newGrid = createGrid();

    for (let x = 0; x &lt; numBlocksX; x++) {
        for (let y = 0; y &lt; numBlocksY; y++) {
            const neighbors = countNeighbors(x, y);
            const isAlive = grid[x][y] === 1;

            if (isAlive &amp;&amp; (neighbors &lt; 2 || neighbors &gt; 3)) {
                // cell dies due to underpopulation or overpopulation
                newGrid[x][y] = 0;
            } else if (!isAlive &amp;&amp; neighbors === 3) {
                // cell becomes alive due to reproduction
                newGrid[x][y] = 1;
            } else {
                // cell remains in its current state
                newGrid[x][y] = grid[x][y];
            }
        }
    }

    grid = newGrid;
}

function countNeighbors(x, y) {
    let count = 0;

    for (let i = -1; i &lt;= 1; i++) {
        for (let j = -1; j &lt;= 1; j++) {
            if (i === 0 &amp;&amp; j === 0) continue;

            const neighborX = x + i;
            const neighborY = y + j;

            if (
                neighborX &gt;= 0 &amp;&amp;
                neighborX &lt; numBlocksX &amp;&amp;
                neighborY &gt;= 0 &amp;&amp;
                neighborY &lt; numBlocksY
            ) {
                count += grid[neighborX][neighborY];
            }
        }
    }

    return count;
}

function drawGrid() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    for (let x = 0; x &lt; numBlocksX; x++) {
        for (let y = 0; y &lt; numBlocksY; y++) {
            const isAlive = grid[x][y] === 1;

            if (isAlive) {
                ctx.fillStyle = 'rgba(255, 183, 197, 0.8)'; // cherry blossom color with 80% opacity
            } else {
                ctx.fillStyle = 'rgba(0, 0, 0, 0)'; // completely transparent
            }

            const posX = x * blockSize;
            const posY = y * blockSize;

            ctx.fillRect(posX, posY, blockSize, blockSize);
        }
    }
}

// check wikipedia for game of life on more info
</code></pre> </details> <p><br> <br></p> <hr> <p><br> <br></p> <details> <summary>### simple http server using go-lang</summary> <pre><code class="language-go">
package main
//all the below imports are included in default go installation
import (
    "fmt"
    "log"
    "net/http"
)

//this will be the response when you trigger the api
func handler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, "Hello, this is a response from your Go API!")
}

func main() {
    http.HandleFunc("/", handler) // sets the handler for the root path
    log.Println("Starting server on :8080...")
    err := http.ListenAndServe(":8080", nil) // listens on port 8080
    if err != nil {
        log.Fatal("ListenAndServe: ", err)
    }
}

// you may now trigger your api by engaging with http://localhost:8080 
</code></pre> </details> </article> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 Gregor Mihelac. This website is open source under the MIT License. ✨<a href="https://github.com/gregecmaregec/gregecmaregec.github.io" rel="external nofollow noopener" target="_blank">Find the source code here.</a> <br> By using this website, you agree to the <a href="/cookies">Cookies Policy.</a><br> </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?da39b660470d1ba6e6b8bf5f37070b6e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> </body> </html>